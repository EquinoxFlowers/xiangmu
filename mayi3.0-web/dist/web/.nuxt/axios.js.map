{"version":3,"sources":["../../../web/.nuxt/axios.js"],"names":["axiosExtra","setHeader","name","value","scopes","Array","isArray","scope","defaults","headers","setToken","token","type","onRequest","fn","interceptors","request","use","config","onResponse","response","onRequestError","undefined","error","Promise","reject","onResponseError","onError","method","apply","arguments","then","res","data","extendAxiosInstance","key","axios","bind","setupProgress","ctx","process","server","noopLoading","finish","start","fail","set","$loading","window","$nuxt","currentRequests","progress","onProgress","e","loaded","total","Math","min","onUploadProgress","onDownloadProgress","inject","axiosOptions","baseURL","browser","env","_AXIOS_BASE_URL_","common","delete","get","head","post","put","patch","create","$axios"],"mappings":"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","file":"axios.js","sourcesContent":["import Axios from 'axios'\n\n\n// Axios.prototype cannot be modified\nconst axiosExtra = {\n  setHeader (name, value, scopes = 'common') {\n    for (let scope of Array.isArray(scopes) ? scopes : [ scopes ]) {\n      if (!value) {\n        delete this.defaults.headers[scope][name];\n        return\n      }\n      this.defaults.headers[scope][name] = value\n    }\n  },\n  setToken (token, type, scopes = 'common') {\n    const value = !token ? null : (type ? type + ' ' : '') + token\n    this.setHeader('Authorization', value, scopes)\n  },\n  onRequest(fn) {\n    this.interceptors.request.use(config => fn(config) || config)\n  },\n  onResponse(fn) {\n    this.interceptors.response.use(response => fn(response) || response)\n  },\n  onRequestError(fn) {\n    this.interceptors.request.use(undefined, error => fn(error) || Promise.reject(error))\n  },\n  onResponseError(fn) {\n    this.interceptors.response.use(undefined, error => fn(error) || Promise.reject(error))\n  },\n  onError(fn) {\n    this.onRequestError(fn)\n    this.onResponseError(fn)\n  }\n}\n\n// Request helpers ($get, $post, ...)\nfor (let method of ['request', 'delete', 'get', 'head', 'options', 'post', 'put', 'patch']) {\n  axiosExtra['$' + method] = function () { return this[method].apply(this, arguments).then(res => res && res.data) }\n}\n\nconst extendAxiosInstance = axios => {\n  for (let key in axiosExtra) {\n    axios[key] = axiosExtra[key].bind(axios)\n  }\n}\n\n\n\n\n\n\nconst setupProgress = (axios, ctx) => {\n  if (process.server) {\n    return\n  }\n\n  // A noop loading inteterface for when $nuxt is not yet ready\n  const noopLoading = {\n    finish: () => { },\n    start: () => { },\n    fail: () => { },\n    set: () => { }\n  }\n\n  const $loading = () => (window.$nuxt && window.$nuxt.$loading && window.$nuxt.$loading.set) ? window.$nuxt.$loading : noopLoading\n\n  let currentRequests = 0\n\n  axios.onRequest(config => {\n    if (config && config.progress === false) {\n      return\n    }\n\n    currentRequests++\n  })\n\n  axios.onResponse(response => {\n    if (response && response.config && response.config.progress === false) {\n      return\n    }\n\n    currentRequests--\n    if (currentRequests <= 0) {\n      currentRequests = 0\n      $loading().finish()\n    }\n  })\n\n  axios.onError(error => {\n    if (error && error.config && error.config.progress === false) {\n      return\n    }\n\n    currentRequests--\n    $loading().fail()\n    $loading().finish()\n  })\n\n  const onProgress = e => {\n    const progress = ((e.loaded * 100) / (e.total * currentRequests))\n    $loading().set(Math.min(100, progress))\n  }\n\n  axios.defaults.onUploadProgress = onProgress\n  axios.defaults.onDownloadProgress = onProgress\n}\n\nexport default (ctx, inject) => {\n  const axiosOptions = {\n    // baseURL\n    baseURL : process.browser\n      ? 'https://proxy-oagpwnbkpe.now.sh'\n      : (process.env._AXIOS_BASE_URL_ || 'https://proxy-oagpwnbkpe.now.sh'),\n\n    // Create fresh objects for all default header scopes\n    // Axios creates only one which is shared across SSR requests!\n    // https://github.com/mzabriskie/axios/blob/master/lib/defaults.js\n    headers: {\n      common : {\n        'Accept': 'application/json, text/plain, */*'\n      },\n      delete: {},\n      get: {},\n      head: {},\n      post: {},\n      put: {},\n      patch: {}\n    }\n  }\n\n  \n\n  // Create new axios instance\n  const axios = Axios.create(axiosOptions)\n\n  // Extend axios proto\n  extendAxiosInstance(axios)\n\n  // Setup interceptors\n  \n  \n  setupProgress(axios, ctx) \n  \n\n  // Inject axios to the context as $axios\n  ctx.$axios = axios\n  inject('axios', axios)\n}\n"]}